<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="initial-scale=1.0">
   <link rel="stylesheet" href="style.css">
   <script src="./build/aya.js"></script>
   <title>ayajs</title>
</head>

<body>

   <script>
      var aya = new aya.Application();
      console.log(aya);

      var dx = 300, dy = 100, r = 5, width = 40, height = 20;


      // node root
      var noeud = aya.createCircle(dx, dy, r);
      noeud.draw();

      noeud.vertex.map( (vt) => vt.removeFromDOM());
      noeud.c_points.map( (cp) => cp.removeFromDOM());

      var path = aya.createText(dx - 30, dy , "foo");
      path.draw();


      var line = aya.createPolyline([dx + r, dy, dx+r+100, dy]);
      line.draw();

      var box = aya.createLozenge(dx+r+100 + 50/2, dy - 50/2, 50, 50);
      box.draw();
      box.vertex.map( (vt) => vt.removeFromDOM());
      box.c_points.map( (cp) => cp.removeFromDOM());

      var arc = aya.createPolyline([dx+r+100+50/2, dy - 50/2, dx+r+100+50/2, dy - 50/2 - 25, dx+r+100+50/2 + 70, dy - 50/2 -25] );
      arc.draw();
      arc.c_svg.setAttribute("fill", "none");

      var verb = aya.createComponent("rectangle",{x : dx+r+100+50/2 + 15, y : dy - 50/2 - 25 - height - 5, width: width, height: height});
      verb.form.c_svg.setAttributeNS(null, "stroke", "white");


      verb.form.vertex.map( (vt) => vt.removeFromDOM());
      verb.form.c_points.map( (cp) => cp.removeFromDOM());
      var text_verb = aya.createText(0,0, "get");

      verb.form.addChild(text_verb, (p,c) => {
         c.setOffsetX(p.x + 2);
         c.setOffsetY(p.y + p.height/2);
      }, (p, c) => {

      });

      var method = aya.createRectangle( dx+r+100+50/2 + 70, dy - 50/2 -25 - height/2, width, height);
      method.draw();
      method.vertex.map( (vt) => vt.removeFromDOM());
      method.c_points.map( (cp) => cp.removeFromDOM());


      var dx2 = dx + 50/2, dy2 = dy + 100;
    
      // node root
      var noeud2 = aya.createCircle(dx2, dy2, r);
      noeud2.draw();

      noeud2.vertex.map( (vt) => vt.removeFromDOM());
      noeud2.c_points.map( (cp) => cp.removeFromDOM());

      var path = aya.createText(dx2 - 40, dy2 , "{id}");
      path.draw();


      var link = aya.createPolyline([dx, dy+5, dx2, dy2-5]);
      link.draw();



      var line = aya.createPolyline([dx2 + r, dy2, dx2+r+100, dy2]);
      line.draw();

      var box = aya.createLozenge(dx2+r+100 + 50/2, dy2 - 50/2, 50, 50);
      box.draw();
      box.vertex.map( (vt) => vt.removeFromDOM());
      box.c_points.map( (cp) => cp.removeFromDOM());

      var arc = aya.createPolyline([dx2+r+100+50/2, dy2 - 50/2, dx2+r+100+50/2, dy2 - 50/2 - 25, dx2+r+100+50/2 + 70, dy2 - 50/2 -25] );
      arc.draw();
      arc.c_svg.setAttribute("fill", "none");

      var verb = aya.createComponent("rectangle",{x : dx2+r+100+50/2 + 15, y : dy2 - 50/2 - 25 - height - 5, width: width, height: height});
      verb.form.c_svg.setAttributeNS(null, "stroke", "white");


      verb.form.vertex.map( (vt) => vt.removeFromDOM());
      verb.form.c_points.map( (cp) => cp.removeFromDOM());
      var text_verb = aya.createText(0,0, "put");

      verb.form.addChild(text_verb, (p,c) => {
         c.setOffsetX(p.x + 2);
         c.setOffsetY(p.y + p.height/2);
      }, (p, c) => {

      });

      var method = aya.createRectangle( dx2+r+100+50/2 + 70, dy2 - 50/2 -25 - height/2, width, height);
      method.draw();
      method.vertex.map( (vt) => vt.removeFromDOM());
      method.c_points.map( (cp) => cp.removeFromDOM());


      var dx3 = dx2 + 50/2, dy3 = dy2 + 100;

      // node root
      var noeud2 = aya.createCircle(dx3, dy3, r);
      noeud2.draw();

      noeud2.vertex.map( (vt) => vt.removeFromDOM());
      noeud2.c_points.map( (cp) => cp.removeFromDOM());

      var path = aya.createText(dx3 - 40, dy3 , "bar");
      path.draw();


      var link = aya.createPolyline([dx2, dy2+5, dx3, dy3-5]);
      link.draw();



      var line = aya.createPolyline([dx3 + r, dy3, dx3+r+100, dy3]);
      line.draw();

      var box = aya.createLozenge(dx3+r+100 + 50/2, dy3 - 50/2, 50, 50);
      box.draw();
      box.vertex.map( (vt) => vt.removeFromDOM());
      box.c_points.map( (cp) => cp.removeFromDOM());

      var arc = aya.createPolyline([dx3+r+100+50/2, dy3 - 50/2, dx3+r+100+50/2, dy3 - 50/2 - 25, dx3+r+100+50/2 + 70, dy3 - 50/2 -25] );
      arc.draw();
      arc.c_svg.setAttribute("fill", "none");

      var verb = aya.createComponent("rectangle",{x : dx3+r+100+50/2 + 15, y : dy3 - 50/2 - 25 - height - 5, width: width, height: height});
      verb.form.c_svg.setAttributeNS(null, "stroke", "white");


      verb.form.vertex.map( (vt) => vt.removeFromDOM());
      verb.form.c_points.map( (cp) => cp.removeFromDOM());
      var text_verb = aya.createText(0,0, "post");

      verb.form.addChild(text_verb, (p,c) => {
         c.setOffsetX(p.x + 2);
         c.setOffsetY(p.y + p.height/2);
      }, (p, c) => {

      });

      var method = aya.createRectangle( dx3+r+100+50/2 + 70, dy3 - 50/2 -25 - height/2, width, height);
      method.draw();
      method.vertex.map( (vt) => vt.removeFromDOM());
      method.c_points.map( (cp) => cp.removeFromDOM());



      document.body.append(aya.svg);
   </script>

</body>

</html>